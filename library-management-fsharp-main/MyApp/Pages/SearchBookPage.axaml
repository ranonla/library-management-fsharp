<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Class="MyApp.Pages.SearchBookPage"
             x:CompileBindings="False">

    <Grid RowDefinitions="Auto,Auto,*,Auto">

        <TextBlock Grid.Row="0"
                   Text="Search Book"
                   FontSize="30"
                   FontWeight="Bold"
                   Foreground="Pink"
                   Margin="20 20 0 0"/>

        <StackPanel Grid.Row="1" Orientation="Horizontal" Spacing="10" Margin="20">
            <TextBox x:Name="SearchBox"
                     Width="400"
                     Watermark="Enter title, author or ID..." />
            <Button x:Name="SearchButton"
                    Content="Search"
                    Width="100"
                    Background="#d6488fff"/>
        </StackPanel>

        <StackPanel Grid.Row="2" Margin="10" Spacing="10">

            <TextBlock x:Name="MessageText"
                       FontSize="16"
                       Foreground="OrangeRed"
                       IsVisible="False"/>

            <ItemsControl x:Name="ResultsPanel"
                          IsVisible="False"
                          Margin="10">

                <!-- FIX: VirtualizingStackPanel prevents duplicated items -->
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <VirtualizingStackPanel/>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>

                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border Background="#2a2a2a"
                                Padding="20"
                                CornerRadius="6"
                                BorderBrush="White"
                                BorderThickness="1"
                                Margin="10">

                            <Grid ColumnDefinitions="1*,1*,1*,Auto"
                                  ColumnSpacing="8">

                                <TextBlock Text="{Binding Title}"
                                           Grid.Column="0"
                                           FontSize="20"
                                           Foreground="LightGreen"/>

                                <TextBlock Text="{Binding Author}"
                                           Grid.Column="1"
                                           FontSize="20"
                                           Foreground="White"/>

                                <TextBlock Text="{Binding Status}"
                                           Grid.Column="2"
                                           FontSize="20"
                                           Foreground="SkyBlue"/>

                                <Button Content="Edit"
                                        Grid.Column="3"
                                        Width="70"
                                        Height="28"
                                        Background="#89ff89"
                                        Foreground="Black"
                                        Tag="{Binding}"
                                        Click="OnResultEditClicked"/>
                            </Grid>

                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>

            </ItemsControl>

        </StackPanel>

        <Button Grid.Row="3"
                x:Name="BackButton"
                Content="â†"
                HorizontalAlignment="Left"
                FontSize="26"
                Width="60"
                Margin="10"/>
    </Grid>
</UserControl>